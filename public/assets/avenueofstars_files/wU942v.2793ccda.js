(this.$WP=this.$WP||[]).push(["wU942v",(e,t)=>{"use strict";var r,a,i,s,n,o,l,_,d=["Attraction_Review","Attractions","AttractionsLander","AttractionsNear","FAQ","FAQ_Answers","Guide","MobileAttraction_Review","MobileAttractions","MobileAttractionsNear","MobileFAQ","MobileFAQ_Answers","MobileNearbyRestaurants","MobileRestaurants","MobileRestaurantSearch","MobileRestaurantsNear","MobileShowUserReviews","MobileSiteIndex","MobileTravel","NearbyRestaurants","Profile","Restaurant_Review","Restaurants","RestaurantsLander","RestaurantsNear","ShowUserReviews","SiteIndex","Travel","Travel_Guide","TravelersChoice","Trips"],u=e=>!!e&&d.includes(e),g="unknown",c="requiredLoginActivated",v="memx_mobile_hardgate_pageview",w="mlHardGatePageViewCount",m=["Restaurant_Review","Attraction_Review","Hotel_Review"],h="requiredLoginPagesViewed",R=18e5,p=e=>s("ml_hard_gate_master")||e&&!1||s("ml_hard_gate_dt"),b=()=>{var e,t,r=null==(e=window)||null==(t=e.navigator)?void 0:t.connection;return r?[r.effectiveType||g,r.type||g]:[g,g]},A=e=>{if(s("hard_gate_excl_disable_domain_direct")||p(e))return!1;var t=i.get("firstEntryServlet");return"Home"===t||"Tourism"===t||"MobileTourism"===t},T=e=>{var t=i.get("sponsoredListingIdClicked");return s("ungate_sponsored_listing_clicks")&&t&&t===e},M=e=>{var t=l();return r((()=>{((e,t)=>{var{action:r,totalViews:a,name:i,servlet:s}=t,l=n.includes(s),[_,d]=b(),u=o(),c=[r];l&&c.push("hotels"),a&&c.push(a),e({module:l?`${i}_hotels`:i,action:c.join("_"),context:`${s||g}|${_}|${d}|${u.toString()}`})})(t,e),e.fn&&e.fn()}),[e,t])},f=()=>i.get(h)||[],E=(e,t)=>f().some((r=>r.servlet===e&&r.pageId===t)),S=(e,t)=>{if(!E(e,t)){var r=f();r.push({servlet:e,pageId:t}),i.set(h,r,R)}},I=(e,t)=>{switch(e){case"ShowTopic":case"MobileShowTopic":return t.topicId||1;case"Profile":return t.username||1;case"ShowUserReviews":case"MobileShowUserReviews":return t.review||1;case"FAQ_Answers":case"MobileFAQ_Answers":return t.topic||1;case"Trips":return t.tripId||1;default:return t.detailId||t.geoId||1}},P=(e,t)=>{var r=I(e,t),a=E(e,r);return f().length>=1&&!a},L=e=>{if(!s("review_detail_hard_gate_master_dt"))return f().length;var t=f();return(s("review_detail_hard_gate_dt_other_servlets")?t.filter((e=>!m.includes(e.servlet))):t.filter((t=>t.servlet===e))).length},V=(e,t)=>{a((()=>{!e&&t&&i.set(c,(new Date).getTime())}),[e,t])},C=()=>{var e=i.get(c);return e?new Date(e):null},G=(e,t,r,a,n,o,l=v)=>{var d,u;return!_||(((e,t,r,a,i,s)=>{var n=[e.toString(),t];n.push(r||0===r?r:"unknown"),n.push((!!a).toString()),s({module:i,action:"gating_ml_model_decision",context:n.join("|")})})(e,(d=parseInt(i.get(w),10),u=isNaN(d)?1:d+1,i.set(w,u,R),u),t,a,l,o),!(!s("ml_hard_gate_targeting_logic")&&!s("ml_hard_gate_no_reqlo"))||e)},D=(e,t,r)=>r&&("Home"===e||"Tourism"===e)&&!1;return[()=>{_=s("ml_hard_gate_model_v1_reevaluate_on_page_view")||s("ml_hard_gate_dt_v1_master")||s("ml_hard_gate_dt_v2_master")||s("ml_hard_gate_dt_v3_master"),e({ML_PAGE_VIEWED_KEY:w,MODAL_NAME:v,PAGE_COUNT_TRIGGER:2,PREVIOUSLY_VIEWED_PAGES_KEY:h,addPageToViewed:S,cameDomainDirect:A,findPageIdentifier:I,gatingEligibility:G,getConnectionType:b,getCurrentPageViewCount:L,getHardGateViewTimestamp:C,getPagesViewed:f,isFromSponsoredClick:T,isMLGatingEnabled:p,isRequiredLoginMWServlet:u,pageCountTriggerReached:P,pageHasBeenViewed:E,shouldDisableRegDialogForRequiredLoginLithium:D,useHardGateViewRecord:V,useTrackAndDelegateCallback:M})},[e=>(r=e.useCallback,a=e.useEffect),e=>i=e.default,e=>s=e.featureIsEnabled,e=>(n=e.HOTEL_SERVLETS,o=e.isEligibleForOneTap),e=>l=e.useGARecorder]]},["cDcdfi","jaCyxS","-i3PJS","MWFqPp","fsml46"]]);
