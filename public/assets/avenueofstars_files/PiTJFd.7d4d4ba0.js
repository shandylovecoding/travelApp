(this.$WP=this.$WP||[]).push(["PiTJFd",(e,t)=>{"use strict";var a,r,l,n,i,d,o,s,c,u,m,_="IG_1KSi_",p=({trip:e,messageType:t,onCtaClick:i})=>{var d,o=a.useCallback((()=>{var t,a;i&&i(),(null==(t=e.route)?void 0:t.url)&&(window.location=null==(a=e.route)?void 0:a.url)}),[i,e]),s=a.createElement("div",{onClick:o},a.createElement(r,{id:"stat_modal_view_trip_v2"}));switch(t){case"CREATED":d=a.createElement(l,{id:"create_trip_success_toast_with_bold",args:{TripName:u((null==e?void 0:e.title)||"")}});break;case"SAVED":d=a.createElement(l,{id:"stat_modal_saved_to_tripname_with_bold",args:{TripName:u((null==e?void 0:e.title)||"")}});break;default:d=null}return a.createElement(n,{cta:s},a.createElement(m,{element:"savedToast",trip:e},a.createElement("span",{className:_},d)))},v="_-0lxWGBX",T=({trip:e,onUndo:t})=>{var i,d=a.createElement("div",{onClick:t},a.createElement(r,{id:"stat_modal_undo"}));return a.createElement(n,{cta:d},a.createElement(m,{element:"unsaveToast",trip:e},a.createElement("span",{className:_},a.createElement(l,{id:"stat_modal_removed_from_tripname_with_bold_v3",args:{TripName:u(null==e?void 0:e.title),TripLink:(null==(i=e.route)?void 0:i.url)||"",TripClass:v}}))))},E=({trip:e,hideCta:t,onCtaClick:i})=>{var d,o=a.useCallback((()=>{i()}),[i]),s=a.createElement("div",{onClick:o},a.createElement(r,{id:"stat_modal_change"}));return a.createElement(n,{cta:t?null:s},a.createElement(m,{element:"savedToast",trip:e},a.createElement("span",{className:_},a.createElement(l,{id:"stat_modal_saved_to_tripname_with_bold_v3",args:{TripName:u(null==e?void 0:e.title),TripLink:(null==(d=e.route)?void 0:d.url)||"",TripClass:v}}))))},C=({onUndo:e})=>{var t=a.createElement("div",{onClick:e},a.createElement(r,{id:"stat_modal_undo"}));return a.createElement(n,{cta:t},a.createElement(r,{id:"stat_modal_removed_from_tripname",args:{sTripName:a.createElement(r,{id:"m1_trips_my_saves_header"})}}))},h=()=>{var[e,t]=a.useContext(i),[,l]=d(o),u=a.useCallback(((e,t)=>l({tripId:e,referenceId:`${t.id}`,referenceType:t.type,allowDuplicates:!1}).then((e=>{var t,a,r,l,n,i,d,o=null==e||null==(t=e.data)?void 0:t.addItemToTrip,s=null==e||null==(a=e.data)||null==(r=a.addItemToTrip)?void 0:r.trip,c=null==e||null==(l=e.data)||null==(n=l.addItemToTrip)||null==(i=n.errors)||null==(d=i[0])?void 0:d.error;return{trip:s,error:o?null:{query:"ADD_ITEM_TO_TRIP",tripsError:c||void 0}}})).catch((()=>({trip:null,error:{query:"ADD_ITEM_TO_TRIP"}})))),[l]),m=a.useCallback(((t,r,l)=>{var n=a.createElement(p,{trip:t,messageType:r,onCtaClick:l});e({node:n})}),[e]),_=a.useCallback(((t,r,l)=>{var n=a.createElement(T,{trip:t,onUndo:()=>{u(t.id,r).then((e=>{l&&l(e.trip,e.error)}))}});e({node:n})}),[u,e]),v=a.useCallback(((r,l,n,i=8e3)=>{var d=a.createElement(E,{trip:r,onCtaClick:()=>{l&&l(),t()},hideCta:n});e({node:d,timeout:i})}),[e,t]),h=a.useCallback((()=>{var t=a.createElement(n,null,a.createElement(r,{id:"m1_trips_save_success_stat_d2"}));e({node:t})}),[e]),[,k]=d(s),I=a.useCallback((e=>k({id:`${e.id}`,type:e.type}).then((e=>{var t;return{isAdded:!!(null==e||null==(t=e.data)?void 0:t.MySaves_addToMySavesSingle)}})).catch((()=>({isAdded:!1})))),[k]),b=a.useCallback(((t,r)=>{var l=a.createElement(C,{onUndo:()=>{I(t).then((e=>{r(e.isAdded)}))}});e({node:l})}),[e,I]),y=a.useCallback((t=>e({node:a.createElement(n,null,t)})),[e]);return{launchViewTripToast:m,launchRemoveFromTripToast:_,launchAutoSavedToTripToast:v,launchAddItemToMySavesToast:h,launchRemoveItemFromMySavesToast:b,launchErrorTripToast:a.useCallback((t=>{var r=a.createElement(n,null,a.createElement(c,{query:t.query,error:t.tripsError}));e({node:r})}),[e]),launchToastMessage:y}};return[()=>{e("default",h)},[e=>a=e,e=>(r=e.default,l=e.UnsafeLocalize),e=>(n=e.ToastItem,i=e.Toast),e=>d=e.useMutation,e=>(o=e.AddItemToTrip,s=e.AddItemToMySaves),e=>c=e.default,e=>u=e.escapeHtml,e=>m=e.TripsImpression]]},["cDcdfi","0DsHEV","Q7TAd7","5X2em-","RXx5aI","9I0t-6","WkP2XE","c_rvp5"]]);
