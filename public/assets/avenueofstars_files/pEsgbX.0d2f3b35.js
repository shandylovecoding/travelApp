(this.$WP=this.$WP||[]).push(["pEsgbX",(e,a)=>{"use strict";var t,l,r,n,i,s,c,m,o,u,d,p,v,E,_,N,f,g,k,b,w,h="_2WPW7ss7",x=115,R=e=>{var a=e.replace(/\n/g," ");if(a.length<=x)return a;var t=(e=>e.substr(0,x))(a);if(!e.includes("")||t.includes(""))return t;var l=a.indexOf(""),r=a.substr(l-x,x),n=Math.max(0,r.indexOf(" "));return`...${r=r.substr(n,l-n)}`},y=({item:e,index:a,numReviews:r,servletName:s,onClick:c})=>{var o=1===r,d=2===r,v=l();return t.createElement(n,{onVisible:_((()=>{v({module:s,action:"supplier_review_scroll",context:(a+1).toString()})}),100)},(l=>{return t.createElement("div",{className:i(o?"_2_vicE1M":d?"xuFnScnB":!d&&"_3xs8d-Kj","_3LOx-Yuy","reviewContainer"),key:e.reviewId},t.createElement("img",{src:e.avatarUrl,alt:e.screenName,className:o?"_18T-0Xqz":"o1vliiJv"}),t.createElement("div",{className:i(o?"_1Jg0C-Qh":d?"_1eVw--Bb":!d&&"_3fHDiY-l")},t.createElement("div",null,e.screenName),t.createElement("div",{className:"_2gdKPr3F"},e.location),t.createElement("span",{className:i("_3j0VIWg-",h)},t.createElement(u,{name:"pencil-paper",color:"primaryIcon"})),e.publishedReviews,t.createElement("span",{className:i("_2fkEPuJW",h)},t.createElement(u,{name:"thumbs-up",color:"primaryIcon"})),e.helpfulVotes),t.createElement("div",{ref:l,className:o?"U6-64NcN":""},t.createElement("div",{className:"_2Dxb-5W3"},e.displayTitle),t.createElement("div",{className:"_55TsVY4x"},t.createElement(N,{variant:"supporting-01"},t.createElement(E,{contentLanguage:"''"},t.createElement("span",{dangerouslySetInnerHTML:{__html:(r=R(e.displayText||""),(r||"").replace(/[&<>"'\n\u0086\u0087]|&#?[0-9a-zA-Z]+;/g,(e=>b[e]||e)))}}),(e.displayText||"").length>x&&t.createElement("span",{dangerouslySetInnerHTML:{__html:"&hellip;"}})))),t.createElement(m,{onClick:()=>c(e,a),marginTop:"spacing-02"},t.createElement(p,{id:"common_Read_more"}))));var r}))},C="_39gH7ZEn",D=({avatarUrl:e,screenName:a,publishedReviews:l,helpfulVotes:r})=>t.createElement("div",{className:"_22SSavcA"},t.createElement("img",{src:e,className:"_3lBXeeP7",alt:""}),t.createElement("div",{className:"_2OMZli9W"},a,t.createElement("div",null,t.createElement("span",{className:i("jYrKmCWk",C)},t.createElement(u,{name:"pencil-paper"})),l,t.createElement("span",{className:i("T77i3kB8",C)},t.createElement(u,{name:"thumbs-up"})),r))),S=({rating:e,relativePublishedDate:a,dateText:l,mobile:r})=>e?t.createElement("div",{className:"_3K4OCAZR"},t.createElement(s,{rating:e}),t.createElement("span",{className:"mO7JBlnx"},t.createElement(p,{id:"relative_dates_reviewed_caps_fffff175",args:{0:a||l||""}})),r&&t.createElement("span",{className:"_11ofpalj"},t.createElement("span",{className:"_1f88dZ2z"},t.createElement(u,{name:"mobile-phone"})),t.createElement(p,{id:"via_mobile_15d0"}))):null,O=({review:e})=>e?t.createElement("div",{className:"_2Gt-wEQG"},t.createElement(S,{rating:e.rating||0,relativePublishedDate:e.relativePublishedDate||"",dateText:e.dateText||"",mobile:e.mobile||!1}),t.createElement("div",{className:"_3pZ68FJf"},e.displayTitle),null!==e.productName&&t.createElement(N,{variant:"supporting-01",marginBottom:"spacing-02"},t.createElement(p,{id:"attractions_review_of_activity",args:{activityName:t.createElement("span",{className:"_1huXOZ93"},e.productName||"")}})),void 0!==e.displayText&&t.createElement(N,{variant:"supporting-01",marginBottom:"spacing-02"},e.displayText),null!==e.experienceDate&&t.createElement("div",{className:"_320Yxr_3"},t.createElement("span",{className:"_2f6_VnXM"},t.createElement(p,{id:"supplier_trust_module_date_of_experience"})),e.experienceDate),(e.photoUrls||[]).map((a=>t.createElement("img",{alt:e.productName,key:a,src:a,className:"_3acJqGOj"}))),t.createElement("div",{className:"ZVWpo6Xt"},t.createElement(p,{id:"userreviewbody_26ec"}))):null,I=({onClose:e,review:a})=>t.createElement(f,{width:"800px",closeIconColor:"TA_GREEN_DARK",onClose:e},t.createElement(D,{avatarUrl:a.avatarUrl||"",screenName:a.screenName||"",publishedReviews:a.publishedReviews||0,helpfulVotes:a.helpfulVotes||0}),t.createElement(O,{review:a})),T="_3x4zY_NI",V=({count:e})=>e>5?t.createElement("p",{className:T},t.createElement(p,{id:"supplier_trust_module_explanation_more_than_5_reviews"})):0===e?t.createElement("p",{className:T},t.createElement(p,{id:"supplier_trust_module_explanation_no_review"})):t.createElement("p",{className:T},t.createElement(p,{id:"supplier_trust_module_explanation_5_or_less_reviews"})),B=({supplierData:e,servletName:a,modalOpen:l,clickedReview:r,onClick:n,onClose:s})=>{var m="MOBILE"===t.useContext(d).viewportCategory,E=t.useRef(null),_=t.useRef(null),N=t.useRef(null),[f,g]=t.useState(!1),[k,b]=t.useState(!0),{localize:w}=v();return e?t.createElement("div",{className:"_34T51BH2"},t.createElement("div",{className:"_3BxxutEU"},t.createElement(p,{id:"supplier_trust_module_title"})),t.createElement("div",{className:"_1_QLUV8J"},t.createElement(V,{count:e.productReviewCount}),t.createElement("div",{className:"zxD2Mq_0"},t.createElement("div",{className:"ehl5I7IE"},t.createElement(p,{id:"attractions.merchandising.by_non_imperative",args:{supplier:e.supplierName||""}})),t.createElement("div",{className:"_3O6cjDpn"},t.createElement(c,{rating:e.overallRating,numReviews:e.totalReviewCount,url:"#REVIEWS"})),e.hasCertificateOfExcellence&&t.createElement("div",null,t.createElement("span",{className:"_2gBce6DW"},t.createElement(u,{name:"certificate-of-excellence",color:"primaryIcon"})),t.createElement("span",{className:"_2Scor5dx"},t.createElement(p,{id:"CertExcellence_ffffdc53"}))),!m&&f&&t.createElement("span",{className:"_1JAh6Xlf"},t.createElement(o,{variant:"primary-border","aria-label":w.string("common_Previous"),onClick:()=>{E.current&&(E.current.scrollLeft-=245)},ref:N,iconName:"single-chevron-left"})),!m&&e.supplierReviews.length>3&&k&&t.createElement("span",{className:"J7Gv7nVd"},t.createElement(o,{variant:"primary-border","aria-label":w.string("common_Next"),onClick:()=>{E.current&&(E.current.scrollLeft+=245)},ref:_,iconName:"single-chevron-right"})),t.createElement("div",{onScroll:()=>{if(E.current){E.current.scrollLeft<=0?g(!1):b(!0);var e=Math.ceil(E.current&&E.current.scrollLeft);E.current&&e>=E.current.scrollWidth-E.current.offsetWidth?b(!1):E.current&&E.current.scrollLeft>0&&g(!0)}},className:i("_3L5vTurR","tourOperatorReviews"),ref:E},(e.supplierReviews||[]).map(((l,r)=>t.createElement(y,{key:l.reviewId,index:r,item:l,numReviews:e.supplierReviews.length,servletName:a,onClick:n}))),l&&t.createElement(I,{onClose:s,review:r}))))):null},L=({servletName:e,returnEmpty:a,supplierData:r,modalOpen:i,clickedReview:s,onClick:c,onClose:m})=>{var o=l();return t.createElement(n,{onVisible:()=>{o({module:e,action:"in_view"})}},(l=>t.createElement("div",{ref:l},!a&&t.createElement(B,{supplierData:r,servletName:e,modalOpen:i,clickedReview:s,onClick:c,onClose:m}))))},W="SupplierTrustModule",A=()=>{var e=l(),[a,n]=t.useState(!1),[i,s]=t.useState({}),c=t.useCallback(((a,t)=>{e({module:W,action:"click_read_more",context:(t+1).toString()}),s(a),n(!0)}),[e]),m=t.useCallback((()=>{e({module:W,action:"click_close"}),n(!1),s({})}),[e]),o=(()=>{var e=k(),a={query:w,variables:{locationId:(null==e?void 0:e.supplierId)||0}},[l]=g(a);return t.useMemo((()=>{if(!e)return null;var{data:a}=l,t=a&&a.coeAward&&a.coeAward[0]&&a.coeAward[0].locations&&a.coeAward[0].locations[0];return Object.assign({},e,{hasCertificateOfExcellence:t===e.supplierId})}),[l,e])})();return r("attractions_supplier_trust_module_v2")?o&&o.supplierId&&o.supplierReviews&&0!==o.supplierReviews.length?t.createElement(L,{servletName:W,returnEmpty:!1,supplierData:o,modalOpen:a,clickedReview:i,onClick:c,onClose:m}):null:t.createElement(L,{servletName:W,returnEmpty:!0,supplierData:o,modalOpen:a,clickedReview:i,onClick:c,onClose:m})};return[()=>{b={"":'<span class="_2I8nn40t">',"":"</span>","\n":"<br>","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},(w=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"COEAwardQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"coeAward"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"requests"},"value":{"kind":"ListValue","values":[{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"locations"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}]}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":124}}')).__key=0xc5ceb54fc5c9,e("default",A)},[e=>t=e,e=>l=e.useGARecorder,e=>r=e.featureIsEnabled,e=>n=e.HasBeenVisible,e=>i=e.default,e=>(s=e.BubbleRating,c=e.BubbleRatingWithReviewCount),e=>(m=e.BorderlessButton,o=e.CircularButton),e=>u=e.default,e=>d=e.Device,e=>(p=e.default,v=e.useLocalize),e=>E=e.DirectionalText,e=>_=e.useDebouncedCallback,e=>N=e.default,e=>f=e.default,e=>g=e.useQuery,e=>k=e.useSupplierTrustData]]},["cDcdfi","fsml46","-i3PJS","BLrxBS","jSLlaY","MBK0so","7yGKf-","pyY-iJ","2R4xv2","0DsHEV","miRpRf","gsKhh7","VP50Wc","O8LbtK","5X2em-","f98D2q"]]);
