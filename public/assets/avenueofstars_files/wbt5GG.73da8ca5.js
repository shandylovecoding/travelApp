(this.$WP=this.$WP||[]).push(["wbt5GG",(t,i)=>{"use strict";var e,a,n,s,o,r,c,l,h,p,u,m,L={icon:"/img2/maps/icons/my_location_dot.png",width:30,height:30,anchor:{x:15,y:15}},d=({variant:t="Square",onClick:i})=>{var a=l(),{map:n}=e.useContext(h),{localize:s}=c();return n&&e.createElement(m,{map:n,tracker:a,deniedText:s.string("mw_js_positionPermissionDenied"),variant:t,onClick:i,ariaLabel:s.string("phoenix_maps_accessibility_locate_me")})};return[()=>{m=class extends e.Component{constructor(...t){super(...t),this.state={trackingLocation:!1,active:!1},this.setInactive=()=>{this.setState({active:!1})},this.setMapInteractionListeners=()=>{var{map:t}=this.props;t&&t.once("panStart",this.setInactive)},this.clearMapInteractionListeners=()=>{var{map:t}=this.props;t&&t.off("panStart",this.setInactive)},this.moveMapToNewLocation=t=>{var{map:i}=this.props;i&&i.setCenter(t,16,!0)},this.isLatLngValid=t=>0!==t.lat||0!==t.lng,this.trackClick=()=>{this.props.tracker({module:"find_me",action:"find_me_click"})},this.askForLocation=()=>{if(this.trackClick(),this.setState({active:!0}),this.state.trackingHandler)this.state.userLocation&&(this.moveMapToNewLocation(this.state.userLocation),this.setMapInteractionListeners());else{var t=n(((t,i)=>{var e=new p(t,i);this.isLatLngValid(e)&&(this.state.trackingLocation||(this.moveMapToNewLocation(e),this.setMapInteractionListeners()),this.setState({userLocation:e,trackingLocation:!0}))}),(()=>{window.alert(this.props.deniedText),this.setState({active:!1,trackingHandler:null})}));this.setState({trackingHandler:t})}},this.onClickCircularFloatingActionButton=()=>{this.props.onClick&&this.props.onClick(),this.askForLocation()}}componentWillUnmount(){this.state.trackingHandler&&(s(this.state.trackingHandler),this.clearMapInteractionListeners())}render(){var t=this.state.userLocation?e.createElement(u,{position:this.state.userLocation,width:L.width,height:L.height,src:L.icon,anchor:L.anchor}):null;return"Circle"===this.props.variant?e.createElement("div",null,e.createElement(r,{icon:this.state.active?"nearby-fill":"nearby",ariaLabel:this.props.ariaLabel,onClick:this.onClickCircularFloatingActionButton,onKeyDown:this.onClickCircularFloatingActionButton}),t):e.createElement("div",null,e.createElement("div",{className:"_2XMGxXHz",onClick:this.askForLocation},e.createElement("span",{className:a("ocTOXHET",this.state.active?"_3pZryCkw":"")},e.createElement(o,{name:"nearby"}))),t)}},t("default",d)},[t=>e=t,t=>a=t.default,t=>(n=t.watchLocation,s=t.clearWatch),t=>o=t.default,t=>r=t.CircularFloatingActionButton,t=>c=t.useLocalize,t=>l=t.useGARecorder,t=>(h=t.MapContext,p=t.LatLng,u=t.IconMarker)]]},["cDcdfi","jSLlaY","fiorRT","pyY-iJ","yIC5Nu","0DsHEV","fsml46","VwUieX"]]);
