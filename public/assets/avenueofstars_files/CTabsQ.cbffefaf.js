(this.$WP=this.$WP||[]).push(["CTabsQ",(e,t)=>{"use strict";var n,r,a,l,u,o,s,i,c,f,d,m,g,v,h,D,p,k,y,E,P,A,O,B,S,b,C,x,I,R,w;function M({picker:e,inputField:t,onClose:n,inline:a,alignEdge:l,onReset:u,autoAdvance:o=!0}){var{viewportCategory:s}=i(A),d=null==e?void 0:e.renderPicker({setValue:e.setValue,onApply:e.onApply,value:e.value}),m=r.createElement(c,{size:"small",onClick:()=>{null==e||e.onApply(),o||n()}},r.createElement(S,{id:"phoenix_picker_apply"})),g=u?r.createElement(f,{onClick:u,variant:"accent"},r.createElement(S,{id:"sng_fusion_list_filters_modal_reset"})):null;return"MOBILE"===s?e?r.createElement(D,{header:t,stickyHeader:!0,primaryButton:m,secondaryButton:g,slideFrom:a?"right":"bottom",onClose:n,heightOption:"full",closeButtonPosition:a?"left":void 0,closeButtonIcon:a?"single-chevron-left":void 0},r.createElement("div",{className:"_2tkHAKDl"},d||"")):null:r.createElement(r.Fragment,null,a&&e&&r.createElement("div",{className:"SbEP4uFH"},d),!a&&(null==e?void 0:e.ref.current)&&r.createElement(r.Fragment,null,r.createElement(B,{animated:!0,unstyled:!0,position:"below",shiftY:12,arrowType:"none",alignEdge:l,target:e.ref.current,autoFocus:!0,shouldRestoreFocus:!0},r.createElement("div",{className:"_2_4wMH69"},d,e.showApplyButton&&r.createElement("div",{className:"_2YJ1IMhe"},m))),r.createElement(k,{event:"click",callback:n})))}function T({pickers:e,autoAdvance:t=!0,onBeforeAdvance:n=(()=>!0),onOpen:i,onClose:c,onComplete:f=(()=>{}),autoOpen:g=!1,autoOpenDelay:v=2e3,inputFieldVariant:h="ENTRY",inline:D=!1,children:k,onReset:E,alignEdge:P="left",mapSurface:A}){var O=l(null),B=l(null),S=l(null),{trackClick:b}=y(),I=C(),R=u((()=>{I&&null!=B.current&&B.current.ref.current.focus()}),[I]),w=u((e=>{e&&S.current?S.current(e):t&&O.current&&B.current&&n(B.current)&&null==O.current()&&(R(),f())}),[t,n,f,R]),T=o((()=>Array.from({length:e.length},(()=>r.createRef()))),[e.length]),_=r.useCallback((e=>{var t=e.onApply?e.onApply():null;return t?w(t):(R(),f()),null}),[w,R,f]),H=r.useCallback((e=>{var t=e.onApply?e.onApply():null;w(t)}),[w]),V=o((()=>e.map(((e,n)=>Object.assign({},e,{setValue:t=>{var n=e.setValue?e.setValue(t):null;w(n)},onApply:t?()=>H(e):()=>_(e),ref:T[n]})))),[e,t,_,H,T,w]),N=g&&0===v,{openPicker:F,nextPicker:j,closePicker:W,currentPicker:L,getPickerValues:z,isOpen:G}=function(e,t=!1){var n,[r,o]=a(t?null==(n=e[0])?void 0:n.name:null),s=l(null);s.current=e.find((e=>e.name===r));var i=u((()=>{var t;if(!r)return null;var n=e.findIndex((e=>e===s.current)),a=null==(t=e[n+1])?void 0:t.name;return o(a),a}),[r,e]),c=u((()=>{o(null)}),[o]),f=u((t=>{var n=t||e[0].name;o(n)}),[e]),{trackClick:d}=y();return x("Escape",c),{isOpen:!!r,nextPicker:i,closePicker:c,openPicker:f,getPickerValues:e=>{var t=s.current;return{isOpen:e.name===(null==t?void 0:t.name),isDimmed:null==t||e!==t,onClick:()=>{d({clientContext:`click${e.name[0].toUpperCase()}${e.name.substring(1)}PickerButton`}),o(e.name)}}},currentPicker:s.current}}(V,N);O.current=j,B.current=L,S.current=F,s((()=>{var e=g&&!N&&S.current?setTimeout(S.current,v):null;return()=>clearTimeout(e)}),[g,v,N]),s((()=>{L&&(b({clientContext:A?"mapDatepicker":"pickerOpened",clientParameter:L.name}),null==i||i(L))}),[L,b,i,A]);var K=()=>{R(),W(),L&&(null==c||c(L))},J=(e=!1)=>r.createElement("div",null,r.createElement(m,{variant:h},V.map((e=>e.renderButton(null==L?void 0:L.name,function(e,t,n){return{selected:!n.isDimmed,onClick:n.onClick,key:e.name,ref:e.ref}}(e,0,z(e)))))),e&&r.createElement("div",{className:"_2Ib2Ahii"},r.createElement(d,{marginY:"spacing-05"}))),Y=E?()=>{E(),w("startDate")}:void 0,U=()=>r.createElement(p,{events:["onClick","onTouchStart"]},J(),r.createElement(M,{picker:L,inputField:J(!0),onClose:K,inline:D,alignEdge:P,onReset:Y,autoAdvance:t}));return x("Escape",K),k?k({renderPickerFlow:U,currentPicker:L,closePicker:W}):U()}var _=({fromMonth:e,monthRange:t,maxRangeDays:r,startDate:a,endDate:l,onDateSelect:u,onDateReset:o,onDateRangeSelect:s,numberOfMonths:i,layoutStyle:c,fullHeight:f,fullWidth:d,isEndDate:m=!1,disableBefore:g=new Date})=>{var[v,h]=n.useState(m?a:null);n.useEffect((()=>{h(m?a:null)}),[a,m]);var D=n.useCallback(((e,t)=>{t||(!v||!m&&v>=e?(h(e),u&&u(e,!1)):e>v?(u&&u(e,!0),s&&s(v,e),h(null)):e<v&&(u&&u(e,!1),h(e)))}),[v,m,s,u]);return n.createElement(I,{onDateReset:o,month:v||a,fromMonth:e,monthRange:t,numberOfMonths:i,layoutStyle:c,startDate:v||a,endDate:v?null:l,onDateSelect:D,fullWidth:d,fullHeight:f,maxRangeDays:v||m?r:null,disableBefore:g})};function H(e,t,n,a,l,u,o){return n?r.createElement(g,Object.assign({date:u?e:t},o)):u?r.createElement(v,Object.assign({from:a?null:e,to:a?null:t},o)):null}function V({startDate:e,endDate:t,isDefaultDates:n,setDates:a,resetDates:l,maxRangeDays:u,disableBefore:s,fromMonth:c}){var{viewportCategory:f}=i(A),d="MOBILE"===f,m="DESKTOP"===f;return o((()=>{var o=a=>({setValue:o})=>r.createElement(_,{fromMonth:c||new Date,monthRange:d?13:12,numberOfMonths:m?2:1,maxRangeDays:null==u?30:u,onDateReset:n?void 0:l,startDate:e,endDate:t,layoutStyle:d?"infiniteVerticalScroll":"paginated",onDateSelect:o,isEndDate:a,disableBefore:s||new Date,fullWidth:!0});return[{name:"startDate",value:e,setValue:e=>{a(e,!0)},onApply:()=>{n&&a(e,!0)},renderButton:(r,a)=>H(e,t,r,n,0,!0,a),renderPicker:o()},{name:"endDate",value:t,setValue:t=>t<e?(a(t,!0),"endDate"):(a(t,!1),null),renderButton:(r,a)=>H(e,t,r,n,0,!1,a),renderPicker:o(!0)}]}),[t,n,m,d,l,a,e,u,s,c])}function N({startDate:e,endDate:t,isDefaultDates:n,setDates:a,resetDates:l,maxRangeDays:u,disableBefore:s,fromMonth:c}){var{viewportCategory:f}=i(A),d="MOBILE"===f,m="DESKTOP"===f;return o((()=>({name:"dateRange",value:e,setValue:e=>a(e)?null:"dateRange",renderButton:(a,l)=>function(e,t,n,a,l,u,o){return r.createElement(v,Object.assign({from:a?null:e,to:a?null:t},o))}(e,t,0,n,0,0,l),renderPicker:({setValue:a})=>r.createElement(_,{fromMonth:c||new Date,monthRange:d?13:12,numberOfMonths:m?2:1,maxRangeDays:null==u?30:u,onDateReset:n?void 0:l,startDate:e,endDate:t,layoutStyle:d?"infiniteVerticalScroll":"paginated",onDateSelect:a,disableBefore:s||new Date,fullWidth:!0})})),[t,n,m,d,l,a,e,u,s,c])}var F=({fromMonth:e,monthRange:t,selectedDate:r,onDateSelect:a,numberOfMonths:l,layoutStyle:u,fullWidth:o,fullHeight:s,disabledDates:i})=>{var c=n.useCallback(((e,t)=>{t||a&&a(e)}),[a]);return n.createElement(I,{month:r,fromMonth:e,monthRange:t,numberOfMonths:l,layoutStyle:u,startDate:r,onDateSelect:c,fullHeight:s,fullWidth:o,disabledDates:i})};function j({date:e,setDate:t,availableDates:n,isDefaultDates:a,showApplyButton:l}){var{viewportCategory:c}=i(A),f="MOBILE"===c,d="DESKTOP"===c,m=u((e=>!!n&&!n.has(e.toISOString().split("T")[0])),[n]),v=m(e)&&n?(e=>{var t=null==e?void 0:e.values().next().value;if(null!=t){var[n,r,a]=t.split("-").map((e=>parseInt(e,10)));return new Date(n,r-1,a)}return null})(n):e;return s((()=>{v&&v.getTime()!==e.getTime()&&t(v)}),[e,v,t]),o((()=>({name:"date",value:v,showApplyButton:l,setValue:e=>{t(e)},onApply:()=>(a&&t(e),null),renderButton:function(e,t){return r.createElement(g,Object.assign({date:a?null:v},t))},renderPicker:function({setValue:e}){return r.createElement(F,{fromMonth:new Date,monthRange:24,numberOfMonths:d?2:1,selectedDate:v,layoutStyle:f?"infiniteVerticalScroll":"paginated",onDateSelect:e,fullWidth:!0,disabledDates:m})}})),[d,f,t,m,l,v,a,e])}var W=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,L=e=>{if(null!=e&&W.test(e)){var t=new Date(`${e}T00:00`);if(!isNaN(t.getTime()))return t}return null},z=(e,t)=>{var n=L(e);if(null!==n)return n;var r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate()+t)};function G(e,t,n){var{state:{commerce:r}}=E(),{update:{attractions:{setDates:a}}}=i(O),{trackClick:l}=y(),{startDate:o,endDate:s}=(null==r?void 0:r.attractionCommerce)||{},c=L(o),f=L(s),d=u(((t,r)=>{l({clientContext:n?"mapDatepicker":"setAttractionsDates",clientParameter:JSON.stringify({startDate:P(t),endDate:P(r)})}),a(t,r),e({startDate:t,endDate:r})}),[e,a,l,n]),m=u((e=>{var t=new Date(e.getTime()+864e5);d(e,t)}),[d]),g=u((()=>{a(null,null),l({clientContext:"resetAttractionsDates"}),e(null)}),[e,a,l]),v=z(null==t?void 0:t.startDate,0),h=z(null==t?void 0:t.endDate,1);return{singleDate:c||v,startDate:c||v,endDate:f||h,isDefaultDates:!(c&&f||(null==t?void 0:t.setByUser)),setDateRange:d,setSingleDate:m,resetDates:g}}function K(){var e,{state:{commerce:t},dispatch:n}=E(),{update:{attractions:{setPassengers:r}}}=i(O),{trackClick:a}=y({clientContext:"setAttractionsPax"}),l=null==t||null==(e=t.attractionCommerce)?void 0:e.pax;return{pax:o((()=>{var e=new Map;return l&&l.filter(Boolean).forEach((t=>{e.set(t.ageBand,t.count)})),e}),[l]),setPax:u((e=>{var t=[];e.forEach(((e,n)=>t.push({ageBand:n,count:e}))),a({clientParameter:JSON.stringify({pax:t})});var l=e.get("ADULT")||0,u=e.get("CHILD")||0;r(l,u),n({type:"setAttractionsPax",pax:t})}),[n,a,r])}}function J(e){var t,n,r,{hotels:a,update:{hotels:{setStayDates:l}}}=i(O),{trackClick:o}=y(),s=u((({checkIn:e,checkOut:t})=>{o({clientContext:"setHotelDates",clientParameter:JSON.stringify({checkIn:P(e),checkOut:P(t)})}),l(e,t)}),[l,o]);return null===a||a.defaultDates?(t=z(null==e?void 0:e.checkIn,0),n=z(null==e?void 0:e.checkOut,1),r=(null==e?void 0:e.setByUser)||null):(t=a.checkInDate,n=a.checkOutDate,r=!a.defaultDates),{dates:{checkIn:t,checkOut:n},setByUser:r,setDates:s}}var Y=(e,t)=>{var n=Array.from(Array(t),(()=>[]));if(e.length>0)for(var r=[...e],a=Math.floor(r.length/t),l=r.length-a*t,u=0;u<n.length;u++){var o=a+(u<l?1:0);o>0&&(n[u]=r.slice(0,o),r=r.slice(o))}return n};function U(e){var t,{hotels:n,update:{hotels:{setGuestInfo:r,setTravelInfo:a}}}=i(O),{trackClick:l}=y(),{defaultRooms:s,defaultAdults:c,defaultChildrenAges:f,checkIn:d,checkOut:m}=o((()=>(e=>{if(null==(null==e?void 0:e.rooms))return w;var t=0,n=[],{rooms:r}=e;return r.filter(Boolean).forEach((e=>{t+=null==e.adults?0:e.adults,null!=e.childrenAges&&n.push(...e.childrenAges.filter(Boolean))})),{defaultRooms:r.length,defaultAdults:t,defaultChildrenAges:n,checkIn:e.checkIn,checkOut:e.checkOut}})(e)),[e]),g=u((({rooms:e,adults:t,childrenAges:u})=>((e,t,n,r,a,l)=>(u,o,s)=>{l({clientContext:"setHotelGuests",clientParameter:JSON.stringify({rooms:u,adults:o,childrenAges:s})});var i=Y(s,u);null!=n?e(o,u,i):t(r,a,o,u,i)})(r,a,n,d,m,l)(e,t,u)),[r,a,n,d,m,l]);return[{rooms:(null==n?void 0:n.rooms)||s,adults:(null==n?void 0:n.adults)||c,childrenAges:(null==n||null==(t=n.childAgesPerRoom)?void 0:t.flat())||f},g]}function $(){var{update:{hotels:{setTravelInfo:e}}}=i(O),{trackClick:t}=y();return{setTravelInfo:u((({dates:{checkIn:n,checkOut:r},guests:{rooms:a,adults:l,childrenAges:u}})=>{t({clientContext:"setHotelDates",clientParameter:JSON.stringify({checkIn:P(n),checkOut:P(r)})}),t({clientContext:"setHotelGuests",clientParameter:JSON.stringify({rooms:a,adults:l,childrenAges:u})}),e(n,r,l,a,Y(u,a))}),[e,t])}}var Z=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,l;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(a of t.entries())if(!n.has(a[0]))return!1;for(a of t.entries())if(!e(a[1],n.get(a[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(a of t.entries())if(!n.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(t[a]!==n[a])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(l=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,l[a]))return!1;for(a=r;0!=a--;){var u=l[a];if(!e(t[u],n[u]))return!1}return!0}return t!=t&&n!=n},X=e=>Array.from(e.values()).reduce(((e,t)=>e+t),0);function q({passengerInfo:e,currentPax:t,setPax:n,showApplyButton:l}){var[i,c]=a(t),[f,d]=a(null),{localize:m}=b();s((()=>{c(t)}),[t,c]),s((()=>{var r;if(e){var a=!1,l=new Map(t),u=null==(r=e.ageBands)?void 0:r.filter(Boolean);u&&u.length&&(u.forEach((e=>{var n=null!=e.minTravelersPerBooking?e.minTravelersPerBooking:0,r=null!=e.maxTravelersPerBooking?e.maxTravelersPerBooking:10,u=t.get(e.ageBand)||0;u<n?(l.set(e.ageBand,n),a=!0):u>r&&(l.set(e.ageBand,r),a=!0)})),t.forEach(((e,t)=>{u.find((e=>e.ageBand===t))||(l.delete(t),a=!0)}))),a&&n(l)}}),[t,e,n]);var g=u(((e,t)=>{d(null),c((n=>new Map([...n.entries(),[e,t]])))}),[]),v=o((()=>X(t)),[t]),D=u((()=>{return t=null==e?void 0:e.requiresAdultForBooking,n=i,!1!==t&&0===n.get("ADULT")&&0===n.get("SENIOR")?(d(m.string("attractions.booking.errors.no_travelers")),!1):0===X(i)?(d(m.string("attractions.booking.select_travelers_to_see_availability")),!1):!!(e=>{var t=!0;return e.forEach(((e,n)=>{"INFANT"!==n&&e>0&&(t=!1)})),!t})(i)||(d(m.string("exp_booking_no_only_infants")),!1);var t,n}),[i,m,e]),p=u((()=>D()?(Z(i,t)||n(i),null):"pax"),[i,n,D,t]);return o((()=>({name:"pax",showApplyButton:l,value:null,onApply:p,renderButton:function(e,t){return r.createElement(h,Object.assign({guests:v},t))},renderPicker:function(){return e?r.createElement(R,{passengerInfo:e,selections:i,onAgeBandChange:g,errorMessage:f}):null}})),[f,i,p,e,g,l,v])}return e({useAttractionDates:G,useAttractionPax:K,useDateRangePicker:N,useDateRangePickers:V,useHotelDates:J,useHotelGuests:U,useHotelTravelInfo:$,usePaxPicker:q,useSingleDatePicker:j}),[()=>{w={defaultRooms:1,defaultAdults:2,defaultChildrenAges:[],checkIn:new Date,checkOut:new Date},e("default",T),e({useAttractionDates:G,useAttractionPax:K,useDateRangePicker:N,useDateRangePickers:V,useHotelDates:J,useHotelGuests:U,useHotelTravelInfo:$,usePaxPicker:q,useSingleDatePicker:j})},[e=>(n=e,r=e.default,a=e.useState,l=e.useRef,u=e.useCallback,o=e.useMemo,s=e.useEffect,i=e.useContext),e=>(c=e.default,f=e.BorderlessButton),e=>d=e.default,e=>(m=e.InputField,g=e.DateInputFieldItem,v=e.DateRangeInputFieldItem,h=e.GuestsInputFieldItem),e=>D=e.SlideInModal,e=>p=e.default,e=>k=e.default,e=>(y=e.useTracking,E=e.useEntrypointContext,P=e.ISODateString),e=>(A=e.Device,O=e.TravelInfo),e=>B=e.default,e=>(S=e.default,b=e.useLocalize),e=>C=e.useKeyboardNavigationMode,e=>x=e.useKeyboardEvent,e=>I=e.default,e=>R=e.default]]},["cDcdfi","7yGKf-","jPSRY1","pyjSAG","E1X9WP","_cZwhS","Dg5_-9","PEYes_","2R4xv2","MHKLZN","0DsHEV","W3_c4H","8xs-IB","-ZZ9nz","6SswlX"]]);
